parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"sEQ9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t,r){void 0===t&&(t=0),void 0===r&&(r=0),this.x=t,this.y=r}return t.from=function(r){return(new t).copy(r)},t.prototype.mag=function(){var t=this.x,r=this.y;return Math.sqrt(t*t+r*r)},t.prototype.set=function(t,r){return this.x=t,this.y=r,this},t.prototype.copy=function(t){var r=t.x,i=t.y;return this.x=r,this.y=i,this},t.prototype.add=function(t){var r=t.x,i=t.y;return this.x+=r,this.y+=i,this},t.prototype.subtract=function(t){var r=t.x,i=t.y;return this.x-=r,this.y-=i,this},t.prototype.multiply=function(t){return this.x*=t,this.y*=t,this},t.prototype.divide=function(t){return this.x/=t,this.y/=t,this},t.prototype.clone=function(){return t.from(this)},t.prototype.normalize=function(){var t=this.mag();return t>0&&(this.x/=t,this.y/=t),this},t.prototype.dot=function(t){var r=t.x,i=t.y;return this.x*r+this.y*i},t}();exports.Vec=t;
},{}],"CQID":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("../utils/Vec"),e=function(){function e(){this.pos=new t.Vec,this.visible=!0}return e.prototype.update=function(t,e){this.updateBehaviour&&this.updateBehaviour.update(t,e,this)},e.prototype.setPos=function(t){this.pos=t},e.prototype.setIsDead=function(t){this.dead=t},e}();exports.Entity=e;
},{"../utils/Vec":"sEQ9"}],"NHXZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.prototype.update=function(e,t,r){var n=r.children.filter(function(r){return(r.updateBehaviour||r.update)&&r.update(e,t),!r.dead});r.setChildren(n)},e}();exports.ContainerUpdateBehaviour=e;
},{}],"nAOC":[function(require,module,exports) {
"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),function(e){e[e.Text=0]="Text",e[e.Sprite=1]="Sprite",e[e.Texture=2]="Texture",e[e.Container=3]="Container",e[e.TileSprite=4]="TileSprite",e[e.Rect=5]="Rect"}(e=exports.EntityType||(exports.EntityType={}));
},{}],"VTYj":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("~gamelib/entities/Entity"),r=require("~gamelib/behaviours/ContainerUpdateBehaviour"),n=require("./EntityTypeEnum"),i=function(e){function i(){var t=e.call(this)||this;return t.children=[],t.type=n.EntityType.Container,t.updateBehaviour=new r.ContainerUpdateBehaviour,t}return t(i,e),i.prototype.add=function(t){return this.children.push(t),t},i.prototype.remove=function(t){return this.children=this.children.filter(function(e){return e!==t}),t},i.prototype.setChildren=function(t){this.children=t},i.prototype.map=function(t){return this.children.map(t)},i}(e.Entity);exports.Container=i;
},{"~gamelib/entities/Entity":"CQID","~gamelib/behaviours/ContainerUpdateBehaviour":"NHXZ","./EntityTypeEnum":"nAOC"}],"NxGT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){return function(){}}();exports.EntityCanvasRenderer=e;
},{}],"RGUM":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EntityCanvasRenderer"),n=require("~gamelib/entities/EntityTypeEnum"),r=function(e){function r(){var t=e.call(this)||this;return t.entityName=n.EntityType.Text,t}return t(r,e),r.prototype.render=function(t,e){var n=e.style,r=n.font,o=n.fill,i=n.align;r&&(t.font=r),o&&(t.fillStyle=o),i&&(t.textAlign=i),t.fillText(e.text,0,0)},r}(e.EntityCanvasRenderer);exports.TextCanvasRenderer=r;
},{"./EntityCanvasRenderer":"NxGT","~gamelib/entities/EntityTypeEnum":"nAOC"}],"PlUI":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EntityCanvasRenderer"),r=require("~gamelib/entities/EntityTypeEnum"),n=function(e){function n(){var t=e.call(this)||this;return t.entityName=r.EntityType.Sprite,t}return t(n,e),n.prototype.render=function(t,e){if(e.anchor&&t.translate(e.anchor.x,e.anchor.y),e.scale&&t.scale(e.scale.x,e.scale.y),e.rotation){var r=e.pivot?e.pivot.x:0,n=e.pivot?e.pivot.y:0;t.translate(r,n),t.rotate(e.rotation),t.translate(-r,-n)}t.drawImage(e.texture.img,0,0)},n}(e.EntityCanvasRenderer);exports.SpriteCanvasRenderer=n;
},{"./EntityCanvasRenderer":"NxGT","~gamelib/entities/EntityTypeEnum":"nAOC"}],"xPBB":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EntityCanvasRenderer"),r=require("~gamelib/entities/EntityTypeEnum"),n=function(e){function n(){var t=e.call(this)||this;return t.entityName=r.EntityType.TileSprite,t}return t(n,e),n.prototype.render=function(t,e){var r=e.texture.img;t.drawImage(r,e.frame.x*e.tileW,e.frame.y*e.tileH,e.tileW,e.tileH,0,0,e.tileW,e.tileH)},n}(e.EntityCanvasRenderer);exports.TileSpriteCanvasRenderer=n;
},{"./EntityCanvasRenderer":"NxGT","~gamelib/entities/EntityTypeEnum":"nAOC"}],"mVGg":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EntityCanvasRenderer"),n=require("~gamelib/entities/EntityTypeEnum"),r=function(e){function r(){var t=e.call(this)||this;return t.entityName=n.EntityType.Rect,t}return t(r,e),r.prototype.render=function(t,e){t.fillStyle=e.style.fill,t.fillRect(0,0,e.w,e.h)},r}(e.EntityCanvasRenderer);exports.RectCanvasRenderer=r;
},{"./EntityCanvasRenderer":"NxGT","~gamelib/entities/EntityTypeEnum":"nAOC"}],"DYRf":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./EntityCanvasRenderer"),n=require("~gamelib/entities/EntityTypeEnum"),r=function(e){function r(){var t=e.call(this)||this;return t.entityName=n.EntityType.Container,t}return t(r,e),r.prototype.render=function(t,e){if(e.path){var n=e.path,r=n[0],o=n.slice(1);e.path.length>1&&(t.fillStyle=e.style.fill||"#fff",t.beginPath(),t.moveTo(r.x,r.y),o.forEach(function(e){var n=e.x,r=e.y;return t.lineTo(n,r)}),t.closePath(),t.fill())}},r}(e.EntityCanvasRenderer);exports.ContainerRenderer=r;
},{"./EntityCanvasRenderer":"NxGT","~gamelib/entities/EntityTypeEnum":"nAOC"}],"I4YF":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./EntityCanvasRenderer")),e(require("./TextCanvasRenderer")),e(require("./SpriteCanvasRenderer")),e(require("./TileSpriteCanvasRenderer")),e(require("./RectCanvasRenderer")),e(require("./ContainerRenderer"));
},{"./EntityCanvasRenderer":"NxGT","./TextCanvasRenderer":"RGUM","./SpriteCanvasRenderer":"PlUI","./TileSpriteCanvasRenderer":"xPBB","./RectCanvasRenderer":"mVGg","./ContainerRenderer":"DYRf"}],"ikX6":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("~gamelib/entities/Container"),t=require("./EntityRenderes"),n=function(){function n(e,n){var r=document.createElement("canvas");r.width=e,r.height=n,this.w=e,this.h=n,this.view=r,this.ctx=r.getContext("2d"),this.ctx.imageSmoothingEnabled=!1,this.ctx.textBaseline="top",this.renderes=[new t.TextCanvasRenderer,new t.SpriteCanvasRenderer,new t.TileSpriteCanvasRenderer,new t.RectCanvasRenderer,new t.ContainerRenderer]}return n.prototype.render=function(t,n){if(void 0===n&&(n=!0),!1!==t.visible){var r=this.ctx,i=this.renderes;n&&r.clearRect(0,0,this.w,this.h),function t(n){n.children.forEach(function(n){if(!1!==n.visible){if(r.save(),n.pos&&r.translate(Math.round(n.pos.x),Math.round(n.pos.y)),n.anchor&&r.translate(n.anchor.x,n.anchor.y),n.scale&&r.scale(n.scale.x,n.scale.y),n.rotation){var a=n.pivot?n.pivot.x:0,s=n.pivot?n.pivot.y:0;r.translate(a,s),r.rotate(n.rotation),r.translate(-a,-s)}var o=i.find(function(e){return e.entityName===n.type});o&&o.render(r,n),n instanceof e.Container&&t(n),r.restore()}})}(t)}},n}();exports.CanvasRenderer=n;
},{"~gamelib/entities/Container":"VTYj","./EntityRenderes":"I4YF"}],"WyTg":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n={},e=[],r=[],t=!1,o=0,u=0;function a(){t=!0,e.forEach(function(n){return n()})}function i(n){t?console.warn("Warning: asset defined after preload.",n.target):(o--,r.forEach(function(n){return n(u-o,u)}),0===o&&a())}function c(e,r){for(var t=e;t.startsWith("../");)t=e.slice(3);if(n[t])return n[t];var a=r(e,i);return o++,u++,n[t]=a,a}exports.Assets={get completed(){return t},onReady:function(n){if(t)return n();e.push(n),0===o&&a()},onProgress:function(n){r.push(n)},image:function(n){return c(n,function(n,e){var r=new Image;return r.src=n,r.addEventListener("load",e,!1),r})},sound:function(n){return c(n,function(n,e){var r=new Audio;r.src=n;return r.addEventListener("canplay",function n(t){r.removeEventListener("canplay",n),e(t)},!1),r}).cloneNode()}};
},{}],"GEM9":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("~gamelib/entities/Entity"),r=require("~gamelib/Assets"),n=function(e){function n(t){var n=e.call(this)||this;return n.img=r.Assets.image(t),n}return t(n,e),n}(e.Entity);exports.Texture=n;
},{"~gamelib/entities/Entity":"CQID","~gamelib/Assets":"WyTg"}],"lcIw":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("~gamelib/entities/Entity"),r=require("./EntityTypeEnum"),n=function(e){function n(t){var n=e.call(this)||this;return n.texture=t,n.type=r.EntityType.Sprite,n.scale={x:1,y:1},n.anchor={x:0,y:0},n.pivot={x:0,y:0},n.rotation=0,n}return t(n,e),n}(e.Entity);exports.Sprite=n;
},{"~gamelib/entities/Entity":"CQID","./EntityTypeEnum":"nAOC"}],"nyUd":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("~gamelib/entities/Entity"),r=require("./EntityTypeEnum"),n=function(e){function n(t,n){void 0===t&&(t=""),void 0===n&&(n={});var o=e.call(this)||this;return o.type=r.EntityType.Text,o.text=t,o.style=n,o}return t(n,e),n}(e.Entity);exports.Text=n;
},{"~gamelib/entities/Entity":"CQID","./EntityTypeEnum":"nAOC"}],"rk1p":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Entity"),r=require("./EntityTypeEnum"),n=require("~gamelib/utils/Vec"),o=function(e){function o(t,o,i){void 0===i&&(i={fill:"#333"});var u=e.call(this)||this;return u.type=r.EntityType.Rect,u.pos=new n.Vec(0,0),u.w=t,u.h=o,u.style=i,u}return t(o,e),o}(e.Entity);exports.Rect=o;
},{"./Entity":"CQID","./EntityTypeEnum":"nAOC","~gamelib/utils/Vec":"sEQ9"}],"ZSM9":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(e){var t=this;void 0===e&&(e=!0),this.keys={},e&&(document.addEventListener("keydown",function(e){[37,38,39,40,32].indexOf(e.which)>=0&&e.preventDefault(),t.keys[e.which]=!0},!1),document.addEventListener("keyup",function(e){t.keys[e.which]=!1},!1))}return e.prototype.key=function(e,t){return void 0!==t&&(this.keys[e]=t),this.keys[e]},e.prototype.reset=function(){var e=this;Object.keys(this.keys).forEach(function(t){e.keys[t]=!1})},Object.defineProperty(e.prototype,"action",{get:function(){return this.keys[32]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"x",{get:function(){return this.keys[37]||this.keys[65]?-1:this.keys[39]||this.keys[68]?1:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"y",{get:function(){return this.keys[38]||this.keys[87]?-1:this.keys[40]||this.keys[83]?1:0},enumerable:!0,configurable:!0}),e}();exports.KeyControls=e;
},{}],"T9IB":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){var e=this;this.el=t,this.pos={x:0,y:0},this.isDown=!1,this.pressed=!1,this.released=!1,document.addEventListener("mousedown",function(t){return e.down(t)},!1),document.addEventListener("mouseup",function(){return e.up()},!1),document.addEventListener("mousemove",function(t){return e.move(t)},!1)}return t.prototype.mousePosFromEvent=function(t){var e=t.clientX,o=t.clientY,n=this.el,s=this.pos,i=n.getBoundingClientRect(),r=n.width/n.clientWidth,u=n.height/n.clientHeight;s.x=(e-i.left)*r,s.y=(o-i.top)*u},t.prototype.down=function(t){this.isDown=!0,this.pressed=!0,this.mousePosFromEvent(t)},t.prototype.up=function(){this.isDown=!1,this.released=!0},t.prototype.move=function(t){this.mousePosFromEvent(t)},t.prototype.update=function(){this.released=!1,this.pressed=!1},t}();exports.MouseControls=t;
},{}],"ADyb":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});
},{}],"nKmT":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./entities/Container"),r=require("./renderer/CanvasRenderer"),n=1/60,t=5*n,i=1,o=n*i,a=function(){function a(n,t,i){void 0===i&&(i="#board"),this.w=n,this.h=t,this.renderer=new r.CanvasRenderer(n,t),document.querySelector(i).appendChild(this.renderer.view),this.scene=new e.Container}return a.prototype.run=function(e){var r=this;void 0===e&&(e=function(){});var a=0,s=0,u=function u(d){requestAnimationFrame(u);var c=d/1e3;for(a+=Math.min(c-s,t),s=c;a>=o;)r.scene.update(n,c/i),e(n,c/i),a-=o;r.renderer.render(r.scene)};requestAnimationFrame(function(e){s=e/1e3,requestAnimationFrame(u)})},a}();exports.Game=a;
},{"./entities/Container":"VTYj","./renderer/CanvasRenderer":"ikX6"}],"v3QC":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var n=Math.random,r=function(r,t){return void 0===t&&(t=null),null==t&&(t=r||1,r=0),n()*(t-r)+r},t=function(n,t){return void 0===t&&(t=null),Math.floor(r(n,t))},e=function(n){return void 0===n&&(n=2),0===t(0,n)},a=function(n){return n[t(n.length)]},o=function(n,r){var t=n.x-r.x,e=n.y-r.y;return Math.sqrt(t*t+e*e)},u=function(n,r,t){return Math.max(r,Math.min(n,t))},d=function(n,r){var t=n.x-r.x,e=n.y-r.y,a=Math.atan2(e,t);return a},i=42,c=function(n){return void 0===n&&(n=NaN),isNaN(n)||(i=n),i},f=function(){return(i=(16807*i+0)%2147483647)/2147483647},l=function(r){void 0===r&&(r=!0),f(),n=r?f:Math.random};exports.math={randf:r,rand:t,randOneFrom:a,randOneIn:e,distance:o,clamp:u,angle:d,useSeededRandom:l,randomSeed:c,randomSeeded:f};
},{}],"lsNs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../entities/Rect"),t=require("./math"),n=function(e){var t=e.pos,n=e.w,r=e.h;return{x:t.x+n/2,y:t.y+r/2}},r=function(e,r){return t.math.distance(n(e),n(r))},i=function(t){t.children=t.children||[];var n=new e.Rect(t.w,t.h,{fill:"rgba(255, 0, 0, 0.3)"});if(t.children.push(n),t.hitBox){var r=t.hitBox,i=r.x,h=r.y,u=r.w,x=r.h,a=new e.Rect(u,x,{fill:"rgba(255, 0, 0, 0.5)"});a.pos.x=i,a.pos.y=h,t.children.push(a)}return t},h=function(e){var t=e.w,n=e.h,r=e.pos,i=e.hitBox||{x:0,y:0,w:t,h:n};return{x:i.x+r.x,y:i.y+r.y,w:i.w-1,h:i.h-1}},u=function(e,t){var n=h(e),r=h(t);return n.x+n.w>=r.x&&n.x<=r.x+r.w&&n.y+n.h>=r.y&&n.y<=r.y+r.h},x=function(e,t,n){var r=h(e);t.map(function(e){var t=h(e);r.x+r.w>=t.x&&r.x<=t.x+t.w&&r.y+r.h>=t.y&&r.y<=t.y+t.h&&n(e)})},a=function(e,r){return t.math.angle(n(e),n(r))};exports.entity={center:n,distance:r,bounds:h,hit:u,hits:x,addDebug:i,angle:a};
},{"../entities/Rect":"rk1p","./math":"v3QC"}],"XNjc":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.prototype.update=function(e,r,t){var a=t.current,n=t.anims,u=t.frameSource;if(a){var o=n[a];o.update(e),u.x=o.frame.x,u.y=o.frame.y}},e}();exports.AnimManagerBehaviour=e;
},{}],"aqlZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(){function e(){}return e.prototype.update=function(e,r,t){var u=t.rate,a=t.frames;t.curTime+=e,t.curTime>u&&(t.curFrame++,t.frame=a[t.curFrame%a.length],t.curTime-=u)},e}();exports.AnimBehaviour=e;
},{}],"z2AN":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./entities/Entity"),e=require("./behaviours/AnimManagerBehaviour"),n=require("./behaviours/AnimBehaviour"),i=function(r){function e(t,e){var i=r.call(this)||this;return i.frames=t,i.rate=e,i.updateBehaviour=new n.AnimBehaviour,i.reset(),i}return t(e,r),e.prototype.reset=function(){this.frame=this.frames[0],this.curFrame=0,this.curTime=0},e}(r.Entity);exports.Anim=i;var o=function(r){function n(t){var n=r.call(this)||this;return n.anims={},n.running=!1,n.frameSource=t.frame,n.current=null,n.updateBehaviour=new e.AnimManagerBehaviour,n}return t(n,r),n.prototype.add=function(t,r,e){return this.anims[t]=new i(r,e),this.anims[t]},n.prototype.play=function(t){var r=this.current,e=this.anims;t!==r&&(this.current=t,e[t].reset())},n.prototype.stop=function(){this.current=null},n}(r.Entity);exports.AnimManager=o;
},{"./entities/Entity":"CQID","./behaviours/AnimManagerBehaviour":"XNjc","./behaviours/AnimBehaviour":"aqlZ"}],"rNeu":[function(require,module,exports) {
"use strict";var e=this&&this.__extends||function(){var e=function(t,r){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(t,r)};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var t=require("./Sprite"),r=require("./EntityTypeEnum"),n=require("~gamelib/AnimManager"),i=function(t){function i(e,i,o){var a=t.call(this,e)||this;return a.type=r.EntityType.TileSprite,a.tileW=i,a.tileH=o,a.frame={x:0,y:0},a.anims=new n.AnimManager(a),a}return e(i,t),i.prototype.setFrame=function(e){this.frame=e},Object.defineProperty(i.prototype,"w",{get:function(){return this.tileW*Math.abs(this.scale.x)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"h",{get:function(){return this.tileH*Math.abs(this.scale.y)},enumerable:!0,configurable:!0}),i}(t.Sprite);exports.TileSprite=i;
},{"./Sprite":"lcIw","./EntityTypeEnum":"nAOC","~gamelib/AnimManager":"z2AN"}],"aJJd":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Container"),r=require("./TileSprite"),o=function(e){function o(t,o,i,n,p,s){var a=e.call(this)||this;return a.mapW=o,a.mapH=i,a.tileW=n,a.tileH=p,a.w=o*n,a.h=i*p,a.children=t.map(function(t,e){var i=new r.TileSprite(s,n,p);return i.frame=t,i.pos.x=e%o*n,i.pos.y=Math.floor(e/o)*p,i}),a}return t(o,e),o.prototype.pixelToMapPos=function(t){var e=this.tileW,r=this.tileH;return{x:Math.floor(t.x/e),y:Math.floor(t.y/r)}},o.prototype.mapToPixelPos=function(t){var e=this.tileW,r=this.tileH;return{x:t.x*e,y:t.y*r}},o.prototype.tileAtMapPos=function(t){return this.children[t.y*this.mapW+t.x]},o.prototype.tileAtPixelPos=function(t){return this.tileAtMapPos(this.pixelToMapPos(t))},o.prototype.setFrameAtMapPos=function(t,e){var r=this.tileAtMapPos(t);return r.frame=e,r},o.prototype.setFrameAtPixelPos=function(t,e){return this.setFrameAtMapPos(this.pixelToMapPos(t),e)},o.prototype.tilesAtCorners=function(t,e,r){var o=this;return void 0===e&&(e=0),void 0===r&&(r=0),[[t.x,t.y],[t.x+t.w,t.y],[t.x,t.y+t.h],[t.x+t.w,t.y+t.h]].map(function(t){var i=t[0],n=t[1];return o.tileAtPixelPos({x:i+e,y:n+r})})},o}(e.Container);exports.TileMap=o;
},{"./Container":"VTYj","./TileSprite":"rNeu"}],"hhO6":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function o(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(o.prototype=r.prototype,new o)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./ContainerUpdateBehaviour"),r=function(e){function r(){return null!==e&&e.apply(this,arguments)||this}return t(r,e),r.prototype.update=function(t,r,o){e.prototype.update.call(this,t,r,o),o.subject&&o.focus()},r}(e.ContainerUpdateBehaviour);exports.CameraBehaviour=r;
},{"./ContainerUpdateBehaviour":"NHXZ"}],"ewIA":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,o){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var o in e)e.hasOwnProperty(o)&&(t[o]=e[o])})(e,o)};return function(e,o){function r(){this.constructor=e}t(e,o),e.prototype=null===o?Object.create(o):(r.prototype=o.prototype,new r)}}();Object.defineProperty(exports,"__esModule",{value:!0});var e=require("./Container"),o=require("./Entity"),r=require("./Sprite"),i=require("../utils/math"),n=require("../behaviours/CameraBehaviour"),s=function(e){function s(t,o,r){void 0===r&&(r=o);var i=e.call(this)||this;return i.w=o.w,i.h=o.h,i.worldSize=r,i.updateBehaviour=new n.CameraBehaviour,i.setSubject(t),i}return t(s,e),s.prototype.setSubject=function(t){this.subject=t?t instanceof o.Entity?t.pos:t:this.pos,this.offset={x:0,y:0},t instanceof o.Entity&&(this.offset.x+=t.w/2,this.offset.y+=t.h/2),t instanceof r.Sprite&&(this.offset.x-=t.anchor.x,this.offset.y-=t.anchor.y),this.focus()},s.prototype.focus=function(){var t=this,e=t.pos,o=t.w,r=t.h,n=t.worldSize,s=t.subject,u=t.offset,a=s.x+u.x-o/2,c=n.w-o,f=-i.math.clamp(a,0,c),h=s.y+u.y-r/2,p=n.h-r,y=-i.math.clamp(h,0,p);e.x=f,e.y=y},s}(e.Container);exports.Camera=s;
},{"./Container":"VTYj","./Entity":"CQID","./Sprite":"lcIw","../utils/math":"v3QC","../behaviours/CameraBehaviour":"hhO6"}],"MgB7":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../utils/entity");exports.deadInTracks=function(r,t,n,i){void 0===n&&(n=0),void 0===i&&(i=0);var o=e.entity.bounds(r);return t.tilesAtCorners(o,n,i).map(function(e){return e&&e.frame.walkable}).some(function(e){return!e})&&(n=0,i=0),{x:n,y:i}};
},{"../utils/entity":"lsNs"}],"SfbP":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("../utils/entity");exports.wallSlide=function(r,t,i,o){var n;void 0===i&&(i=0),void 0===o&&(o=0);var s=e.entity.bounds(r),a={up:!1,down:!1,left:!1,right:!1},l=i,u=o;if(0!==o){var p=(n=t.tilesAtCorners(s,0,u)).map(function(e){return e&&e.frame.walkable}),f=p[0],d=p[1],v=p[2],y=p[3];!(o<0)||f&&d||(a.up=!0,u=n[0].pos.y+n[0].h-s.y),!(o>0)||v&&y||(a.down=!0,u=n[2].pos.y-1-(s.y+s.h))}if(0!==i){var w=(n=t.tilesAtCorners(s,l,u)).map(function(e){return e&&e.frame.walkable});f=w[0],d=w[1],v=w[2],y=w[3];!(i<0)||f&&v||(a.left=!0,l=n[0].pos.x+n[0].w-s.x),!(i>0)||d&&y||(a.right=!0,l=n[1].pos.x-1-(s.x+s.w))}return{x:l,y:u,hits:a}};
},{"../utils/entity":"lsNs"}],"J2Kt":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=function(){function t(t){this.set(t)}return t.prototype.set=function(t){this.last=this.state,this.state=t,this.time=0,this.justSetState=!0,this.first=!0},t.prototype.get=function(){return this.state},t.prototype.update=function(t){this.first=this.justSetState,this.time+=this.first?0:t,this.justSetState=!1},t.prototype.is=function(t){return this.state===t},t.prototype.isIn=function(){for(var t=this,e=[],s=0;s<arguments.length;s++)e[s]=arguments[s];return e.some(function(e){return t.is(e)})},t}();exports.State=t;
},{}],"Qsem":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=function(e,t){var n=e.acc,r=e.mass,i=void 0===r?1:r;n.x+=t.x/i,n.y+=t.y/i},t=function(t,n){var r=t.vel.clone().multiply(-1).normalize().multiply(n);e(t,r)},n=function(t,n){var r=t.vel.clone().multiply(-1).normalize().multiply(n);e(t,{x:r.x,y:0})},r=function(t,n,r){e(t,{x:n.x/r,y:n.y/r})},i=function(e,t){var n=e.vel,r=e.acc,i=n.x+r.x*t,l=n.y+r.y*t,o=(n.x+i)/2*t,a=(n.y+l)/2*t;return n.set(i,l),r.set(0,0),{x:o,y:a}},l=function(e,t){var n=i(e,t);return e.pos.add(n),n},o=function(e){var t=e.vel;return Math.sqrt(t.x*t.x+t.y*t.y)};exports.physics={applyForce:e,applyImpulse:r,integrate:i,integratePos:l,speed:o,applyFriction:t,applyHorizontalFriction:n};
},{}],"azKE":[function(require,module,exports) {
"use strict";var t=this&&this.__assign||function(){return(t=Object.assign||function(t){for(var o,e=1,i=arguments.length;e<i;e++)for(var r in o=arguments[e])Object.prototype.hasOwnProperty.call(o,r)&&(t[r]=o[r]);return t}).apply(this,arguments)};Object.defineProperty(exports,"__esModule",{value:!0});var o=require("../Assets"),e=function(){function e(e,i){var r=this;void 0===i&&(i={}),this.playing=!1,this.src=e,this.options=t({volume:1},i);var n=o.Assets.sound(e);n.src=e,i.loop&&(n.loop=!0),n.addEventListener("error",function(){throw Error("Error loading audio: "+e)},!1),n.addEventListener("ended",function(){r.playing=!1},!1),this.audio=n}return e.prototype.play=function(o){void 0===o&&(o={});var e=this.audio,i=this.options,r=t(t({time:0},i),o);e.volume=r.volume,e.currentTime=r.time,e.play(),this.playing=!0},e.prototype.stop=function(){this.audio.pause(),this.playing=!1},Object.defineProperty(e.prototype,"volume",{get:function(){return this.audio.volume},set:function(t){this.options.volume=this.audio.volume=t},enumerable:!0,configurable:!0}),e}();exports.Sound=e;
},{"../Assets":"WyTg"}],"Bko7":[function(require,module,exports) {
"use strict";var t=this&&this.__spreadArrays||function(){for(var t=0,r=0,o=arguments.length;r<o;r++)t+=arguments[r].length;var n=Array(t),e=0;for(r=0;r<o;r++)for(var u=arguments[r],s=0,i=u.length;s<i;s++,e++)n[e]=u[s];return n};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("./Sound"),o=function(){function o(o,n,e){void 0===n&&(n={}),void 0===e&&(e=3),this.count=0,this.sounds=t(Array(e)).map(function(){return new r.Sound(o,n)})}return o.prototype.play=function(t){var r=this.sounds;r[this.count++%r.length].play(t)},o.prototype.stop=function(){this.sounds.forEach(function(t){return t.stop()})},o}();exports.SoundPool=o;
},{"./Sound":"azKE"}],"qcLk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("~gamelib/utils/math"),o=function(){function o(t){this.sounds=t}return o.prototype.play=function(o){void 0===o&&(o={});var n=this.sounds;t.math.randOneFrom(n).play(o)},o.prototype.stop=function(){this.sounds.forEach(function(t){return t.stop()})},o}();exports.SoundGroup=o;
},{"~gamelib/utils/math":"v3QC"}],"y1DU":[function(require,module,exports) {
"use strict";function e(e){for(var r in e)exports.hasOwnProperty(r)||(exports[r]=e[r])}Object.defineProperty(exports,"__esModule",{value:!0}),e(require("./renderer/CanvasRenderer")),e(require("./entities/Container")),e(require("./entities/Texture")),e(require("./entities/Sprite")),e(require("./entities/Text")),e(require("./entities/Rect")),e(require("./controls/KeyControls")),e(require("./controls/MouseControls")),e(require("./behaviours/UpdateBehaviour")),e(require("./behaviours/ContainerUpdateBehaviour")),e(require("./types/index")),e(require("./game")),e(require("./utils/math")),e(require("./utils/entity")),e(require("./entities/TileMap")),e(require("./entities/TileSprite")),e(require("./entities/Camera")),e(require("./movement/deadInTracks")),e(require("./movement/wallSlide")),e(require("./State")),e(require("./utils/Vec")),e(require("./utils/physics")),e(require("./sounds/Sound")),e(require("./sounds/SoundPool")),e(require("./sounds/SoungGroup")),e(require("./Assets"));
},{"./renderer/CanvasRenderer":"ikX6","./entities/Container":"VTYj","./entities/Texture":"GEM9","./entities/Sprite":"lcIw","./entities/Text":"nyUd","./entities/Rect":"rk1p","./controls/KeyControls":"ZSM9","./controls/MouseControls":"T9IB","./behaviours/UpdateBehaviour":"ADyb","./behaviours/ContainerUpdateBehaviour":"NHXZ","./types/index":"ADyb","./game":"nKmT","./utils/math":"v3QC","./utils/entity":"lsNs","./entities/TileMap":"aJJd","./entities/TileSprite":"rNeu","./entities/Camera":"ewIA","./movement/deadInTracks":"MgB7","./movement/wallSlide":"SfbP","./State":"J2Kt","./utils/Vec":"sEQ9","./utils/physics":"Qsem","./sounds/Sound":"azKE","./sounds/SoundPool":"Bko7","./sounds/SoungGroup":"qcLk","./Assets":"WyTg"}],"sJdr":[function(require,module,exports) {
module.exports="/html5-games-novice-to-ninja/crash_test.ce6af12a.png";
},{}],"fa4c":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(e,r){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(e,r)};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),e=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(exports,"__esModule",{value:!0});var r=require("~gamelib"),n=e(require("../res/crash_test.png")),o=new r.Texture(n.default),a=function(e){function n(t){var n=e.call(this,o,48,48)||this;return n.frame.x=r.math.rand(4),n.vel=new r.Vec(r.math.rand(-300,300),r.math.rand(-300,300)),n.pos.set(t.w/2,t.h/2),n.bounds=t,n.rotation=r.math.rand(4)*(Math.PI/2),n.pivot={x:24,y:24},n.updateBehaviour=new u,n}return t(n,e),n}(r.TileSprite);exports.CrashTestDummy=a;var u=function(){function t(){}return t.prototype.update=function(t,e,r){var n=r.pos,o=r.vel,a=r.bounds,u=r.w,i=r.h;n.add(o.clone().multiply(t)),(n.x<0||n.x>a.w-u)&&(o.x*=-1,r.rotation+=Math.PI),(n.y<0||n.y>a.h-i)&&(o.y*=-1,r.rotation+=Math.PI)},t}();
},{"~gamelib":"y1DU","../res/crash_test.png":"sJdr"}],"VmYN":[function(require,module,exports) {
"use strict";var t=this&&this.__extends||function(){var t=function(r,e){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var e in r)r.hasOwnProperty(e)&&(t[e]=r[e])})(r,e)};return function(r,e){function n(){this.constructor=r}t(r,e),r.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}();Object.defineProperty(exports,"__esModule",{value:!0});var r=require("~gamelib"),e=require("./entities/CrashTestDummy"),n=function(r){function n(t,n){var o=r.call(this)||this;o.w=t.w,o.h=t.h,o.controls=n;for(var i={x:0,y:0,w:o.w,h:o.h},s=0;s<30;s++)o.add(new e.CrashTestDummy(i));return o}return t(n,r),n}(r.Container);exports.GameScreen=n;
},{"~gamelib":"y1DU","./entities/CrashTestDummy":"fa4c"}],"n6om":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("~gamelib"),r=require("./GameScreen"),n=new e.Game(800,500),t=new e.KeyControls;function u(){n.scene=new r.GameScreen(n,t)}u(),n.run();
},{"~gamelib":"y1DU","./GameScreen":"VmYN"}]},{},["n6om"], null)
//# sourceMappingURL=/html5-games-novice-to-ninja/game.d9fc0ab0.js.map